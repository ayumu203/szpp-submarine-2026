# 移動・行動アルゴリズムについて
## 概要
- 敵艦の位置を推定する存在確率マップを作成し, 最も期待値の高くなる箇所を攻撃する. 
- 自軍・敵軍のマップを入れ替えることで, 
- 過去情報の割引を行う. 
- 配列サイズは13*13を想定. 

## 1. 各マップの確率管理
盤面上の各座標 $(x, y)$ における敵艦の存在確率 $P(x, y)$ を $0.0 \sim 1.0$ で管理する. 

## 2. 敵艦情報更新ロジック
### 2.1 自艦の攻撃による敵艦の位置推定マップの更新
- **異常なし**
  - 攻撃座標 $(x, y)$ および周囲8マスの $P$ を $0$ に更新. 
- **波高し**
  - 攻撃座標 $(x, y)$ の $P$ を $0$ に更新. 
  - 周囲8マスのうち, 存在可能マス $N$ に対して, 確率の加算を行う. 
    $$P(x, y)_{new} = P(x, y)_{old} + \frac{1}{N} $$
- **命中**
  - 攻撃座標 $(x, y)$ の $P$ を $1.0$ に更新. 
- **撃沈**
  - 攻撃座標 $(x, y)$ の $P$ を $0$ に更新. 

### 2.2. 敵艦の攻撃による敵艦の位置推定マップの更新
敵が攻撃したマス $(x, y)$ のマスには敵艦は存在しない. その周囲8マスに存在する. 
- 攻撃座標 $(x, y)$ の $P$ を $0$ に更新. 
- 周囲8マスのうち, 存在可能マス $N$ に対して, 確率の加算を行う. 
    $$P(x, y)_{new} = P(x, y)_{old} + \frac{1}{N} $$

### 2.3. 敵艦の移動による更新
各座標を移動したマス数だけ移動させる

#### 2.4. 割引量の定義
以下の数式により加算量を定義する. 
$$P(x, y)_{add} = P(x, y) : 0 \le r \le 2$$
$$P(x, y)_{add} = P(x, y) × Δ^r: 3 \le r$$
$Δ : 割引率, r : 経過ターン数$

## 3. 行動決定ロジック
### 3.1 攻撃・移動判断
以下の優先順位で判断を行う. 
1. 相手の推定度が0.8以上のマスに自艦が存在する場合は移動を行う. 
2. そうでないならば攻撃を行う. 

### 3.2. 移動箇所
以下の優先順位で移動箇所を決定する. 
1. 敵艦の場所推定度が$0.5 \sim 0.75$相手が存在すると思われる個所に移動
2. 攻撃可能箇所が増加する場所に移動する
3. 2マス移動できる箇所に移動
4. 1マス移動できる箇所に移動

### 3.3. 攻撃箇所
攻撃可能箇所で最も期待値が高い箇所を攻撃する. 